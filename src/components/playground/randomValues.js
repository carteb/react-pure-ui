import { isValidElement } from 'react';
import { mapValues } from 'lodash';

/*
 * Returns an immutable Map containing values generated by the randomValue
 * function of each control.
 */
const randomValues = (properties) => {
  return mapValues(properties, (ElementOrObject) => {
    if (isValidElement(ElementOrObject)) {
      if (typeof ElementOrObject.props.value !== 'undefined') {
        return ElementOrObject.props.value;
      }

      return ElementOrObject.type.randomValue(ElementOrObject.props);
    }

    return randomValues(ElementOrObject);
  });
};

export default randomValues;
